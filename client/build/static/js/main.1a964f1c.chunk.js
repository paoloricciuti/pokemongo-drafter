(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{25:function(e,t,n){},26:function(e,t,n){},28:function(e,t,n){},34:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n(0),r=n.n(c),o=n(18),s=n.n(o),i=(n(25),n(26),n(8)),u=n.n(i),l=n(10),j=n(4),b=n(2),d=function(){return function(){var e=Object(l.a)(u.a.mark((function e(t,n){var a,c,r,o,s,i,l,j,b,d=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=d.length>2&&void 0!==d[2]?d[2]:null,c=!(d.length>3&&void 0!==d[3])||d[3],r="/api/",o=new Headers,c&&o.append("Content-Type","application/json"),s={method:n,body:null!=a&&"GET"!=n?JSON.stringify(a):null,headers:o},a instanceof FormData&&(s.body=a),i="","GET"==n&&null!=a&&(l=new URLSearchParams,Object.entries(a).forEach((function(e){l.append(e[0],e[1])})),i="?".concat(l.toString())),e.next=11,fetch("".concat(r).concat(t).concat(i),s);case 11:return j=e.sent,e.prev=12,e.next=15,j.json();case 15:b=e.sent,e.next=21;break;case 18:e.prev=18,e.t0=e.catch(12),b={ok:!1};case 21:return e.abrupt("return",b);case 22:case"end":return e.stop()}}),e,null,[[12,18]])})));return function(t,n){return e.apply(this,arguments)}}()},h=(n(28),function(e){var t=Object(c.useState)(""),n=Object(j.a)(t,2),r=n[0],o=n[1],s=Object(c.useState)(""),i=Object(j.a)(s,2),h=i[0],O=i[1],p=Object(c.useState)(""),f=Object(j.a)(p,2),m=f[0],x=f[1],v=Object(c.useState)(""),w=Object(j.a)(v,2),y=w[0],k=w[1],g=d(),S=Object(b.f)(),C=function(){var e=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),k(""),x(""),""!=h){e.next=6;break}return k("Password can't be blank"),e.abrupt("return");case 6:if(""!=r){e.next=9;break}return x("Room name can't be blank"),e.abrupt("return");case 9:return e.next=11,g("rooms","POST",{name:r,password:h});case 11:(n=e.sent).error?x("A room with the same name already exists, try another one"):S.push("/joinroom/".concat(n.link),n);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsx)("div",{className:"main",children:Object(a.jsxs)("div",{className:"container",children:[Object(a.jsx)("h3",{children:"Welcome to Pokemon Go drafter, the definitive tool to create a draft tournament with your friends."}),Object(a.jsx)("p",{class:"explanation",children:"How it works: just type a name for your room and a password to create a new Room. Share the link that will be provided with your friends together with the password you choosed. The system will ask you to insert a nickname, the password of the room and a personal password. And just like that you'll have a way to select you draft team together with your friends."}),Object(a.jsxs)("form",{onSubmit:C,children:[Object(a.jsx)("input",{placeholder:"Room Name",type:"text",value:r,onChange:function(e){o(e.target.value)}}),""!=m&&Object(a.jsx)("div",{className:"error",children:m}),Object(a.jsx)("input",{placeholder:"Password",type:"password",value:h,onChange:function(e){O(e.target.value)}}),""!=y&&Object(a.jsx)("div",{className:"error",children:y}),Object(a.jsx)("button",{type:"submit",children:"Create Room"})]})]})})}),O=Object(c.createContext)(null),p=Object(c.createContext)(null),f=function(){return Object(c.useContext)(O)},m=function(e){var t=e.children,n=Object(c.useState)(null),r=Object(j.a)(n,2),o=r[0],s=r[1];return Object(a.jsx)(O.Provider,{value:o,children:Object(a.jsx)(p.Provider,{value:s,children:t})})},x=function(e){var t=Object(b.h)().link,n=f(),r=Object(b.f)();return Object(c.useEffect)((function(){null==n&&r.push("/joinroom/".concat(t))}),[n]),n&&Object(a.jsx)("div",{className:"main",children:Object(a.jsxs)("div",{className:"container",children:[n.name,n.players.length,Object(a.jsx)("ul",{children:n.players.map((function(e){return Object(a.jsx)("li",{children:e.username},e.username)}))})]})})},v=Object(c.createContext)(null),w=Object(c.createContext)(null),y=function(e){var t=e.children,n=Object(c.useState)(window.io()),r=Object(j.a)(n,2),o=r[0],s=r[1],i=Object(c.useContext)(p);return Object(c.useEffect)((function(){o.on("updateRoom",(function(e){i(e)}))}),[i]),Object(a.jsx)(v.Provider,{value:o,children:Object(a.jsx)(w.Provider,{value:s,children:o&&t})})},k=function(e){var t=Object(b.h)().link,n=Object(b.g)(),r=Object(c.useState)(null),o=Object(j.a)(r,2),s=o[0],i=o[1],h=d(),O=Object(c.useContext)(v),p=Object(c.useState)(""),m=Object(j.a)(p,2),x=m[0],w=m[1],y=Object(c.useState)(""),k=Object(j.a)(y,2),g=k[0],S=k[1],C=Object(c.useState)(""),N=Object(j.a)(C,2),P=N[0],E=N[1],R=Object(c.useState)(""),T=Object(j.a)(R,2),J=T[0],G=T[1],D=Object(b.f)(),U=f();return Object(c.useEffect)((function(){var e=function(){var e=Object(l.a)(u.a.mark((function e(){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h("rooms/".concat(t),"GET");case 2:n=e.sent,i(n);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();n.state?i(n.state):e(),O.on("wrongPassword",(function(e){G("Wrong password")}))}),[]),Object(c.useEffect)((function(){null!=U&&D.push("/room/".concat(U.link))}),[U]),s&&Object(a.jsx)("div",{className:"main",children:Object(a.jsxs)("div",{className:"container",children:[Object(a.jsxs)("h3",{children:["Joining room ",s.name]}),Object(a.jsxs)("form",{onSubmit:function(e){e.preventDefault(),G(""),E(""),/^\w+$/.test(x)?""!=g?O.emit("joinRoom",{username:x,password:g,room:t}):G("Password can't be blank"):E("Username can't contain spaces or special characters and can't be blank")},children:[Object(a.jsx)("input",{placeholder:"Username",type:"text",value:x,onChange:function(e){w(e.target.value)}}),""!=P&&Object(a.jsx)("div",{className:"error",children:P}),Object(a.jsx)("input",{placeholder:"Password",type:"password",value:g,onChange:function(e){S(e.target.value)}}),""!=J&&Object(a.jsx)("div",{className:"error",children:J}),Object(a.jsx)("button",{type:"submit",children:"Join"})]})]})})},g=n(11);var S=function(){return Object(a.jsx)(g.a,{children:Object(a.jsxs)(b.c,{children:[Object(a.jsx)(b.a,{path:"/",exact:!0,component:h}),Object(a.jsx)(b.a,{path:"/room/:link",exact:!0,component:x}),Object(a.jsx)(b.a,{path:"/joinroom/:link",exact:!0,component:k}),Object(a.jsx)(b.a,{path:"/test",exact:!0,children:Object(a.jsx)("div",{children:"Test"})})]})})};s.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(m,{children:Object(a.jsx)(y,{children:Object(a.jsx)(S,{})})})}),document.getElementById("root"))}},[[34,1,2]]]);
//# sourceMappingURL=main.1a964f1c.chunk.js.map