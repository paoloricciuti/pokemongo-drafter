{"version":3,"sources":["hooks/useApi.js","views/Home.js","contexts/RoomContext.js","contexts/SocketContext.js","views/Room.js","views/JoinRoom.js","App.js","index.js"],"names":["useApi","endpoint","method","a","body","isJson","baseUrl","headers","Headers","append","options","JSON","stringify","FormData","queryParameters","qp","URLSearchParams","Object","entries","forEach","param","toString","fetch","res","json","ok","Home","props","useState","roomName","setRoomName","password","setPassword","roomError","setRoomError","passwordError","setPasswordError","api","history","useHistory","createRoom","e","preventDefault","name","room","error","push","link","className","class","onSubmit","placeholder","type","value","onChange","target","RoomContext","createContext","UpdateRoomContext","useRoom","useContext","useSetRoom","RoomContextProvider","children","setRoom","Provider","SocketContext","UpdateSocketContext","useSocket","SocketContextProvider","window","io","socket","setSocket","useEffect","on","Room","useParams","location","useLocation","state","username","searchQuery","setSearchQuery","pvpokeRankings","setPvpokeRankings","pickPokemon","useCallback","chooser","players","find","player","pick_order","choosing","toLowerCase","selected","dataset","id","confirm","choosed_list","indexOf","alert","newPick","room_link","pick","pick_id","emit","startDraft","getPvpokeRankingsAsync","data-title","map","online","started","team","pokemon","style","backgroundImage","replace","speciesId","data-id","data-name","speciesName","onClick","JoinRoom","icon","useRef","setUsername","roomPassword","setRoomPassword","usernameError","setUsernameError","roomPasswordError","setRoomPasswordError","globalRoom","sha256","message","encoder","TextEncoder","data","encode","crypto","subtle","digest","hash","binary","bytes","Uint8Array","len","byteLength","i","String","fromCharCode","btoa","copyLink","navigator","clipboard","writeText","current","classList","add","joinRoom","test","getRoomAsync","ref","App","path","exact","component","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.03cfd9ec.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nconst useApi = () => {\r\n    const returnFunction = async (endpoint, method, body = null, isJson=true) => {\r\n        const baseUrl = \"/api/\";\r\n        let headers = new Headers();\r\n        if(isJson){\r\n            headers.append(\"Content-Type\", \"application/json\");\r\n        }\r\n        let options = {\r\n            method,\r\n            body: body != null && method != \"GET\" ? JSON.stringify(body) : null,\r\n            headers\r\n        }\r\n        if(body instanceof FormData){\r\n            options.body=body;\r\n        }\r\n        let queryParameters = \"\";\r\n        if (method == \"GET\" && body!=null) {\r\n            let qp = new URLSearchParams();\r\n            Object.entries(body).forEach((param) => {\r\n                qp.append(param[0], param[1]);\r\n            });\r\n            queryParameters = `?${qp.toString()}`;\r\n        }\r\n        let res = await fetch(`${baseUrl}${endpoint}${queryParameters}`, options);\r\n        let json;\r\n        try {\r\n            json = await res.json();\r\n        }catch(e){\r\n            json={\r\n                ok: false\r\n            }\r\n        }\r\n        return json;\r\n    };\r\n    return returnFunction;\r\n};\r\n\r\nexport default useApi;","import React, { useState } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport useApi from '../hooks/useApi';\r\nimport \"./Home.css\";\r\n\r\nconst Home = props => {\r\n    const [roomName, setRoomName] = useState(\"\");\r\n    const handleRoomChange = (e) => {\r\n        setRoomName(e.target.value);\r\n    };\r\n    const [password, setPassword] = useState(\"\");\r\n    const handlePasswordChange = (e) => {\r\n        setPassword(e.target.value);\r\n    };\r\n    const [roomError, setRoomError] = useState(\"\");\r\n    const [passwordError, setPasswordError] = useState(\"\");\r\n    const api = useApi();\r\n    const history= useHistory();\r\n    const createRoom = async (e) => {\r\n        e.preventDefault();\r\n        setPasswordError(\"\");\r\n        setRoomError(\"\");\r\n        if (password == \"\") {\r\n            setPasswordError(\"Password can't be blank\");\r\n            return;\r\n        }\r\n        if(roomName==\"\"){\r\n            setRoomError(\"Room name can't be blank\");\r\n            return;\r\n        }\r\n        let room = await api(\"rooms\", \"POST\", {\r\n            name: roomName,\r\n            password: password\r\n        });\r\n        if (room.error) {\r\n            setRoomError(\"A room with the same name already exists, try another one\")\r\n        } else {\r\n            history.push(`/joinroom/${room.link}`, room);\r\n        }\r\n    };\r\n    return (\r\n        <div className=\"main\">\r\n            <div className=\"container\">\r\n                <h3>\r\n                    Welcome to Pokemon Go drafter, the definitive tool to create a draft tournament with your friends.\r\n                </h3>\r\n                <p class=\"explanation\">\r\n                    Chose a room name and a password, share the link and the password with friends and start drafting.\r\n                </p>\r\n                <form onSubmit={createRoom}>\r\n                    <input placeholder=\"Room Name\" type=\"text\" value={roomName} onChange={handleRoomChange} />\r\n                    {roomError != \"\" && <div className=\"error\">\r\n                        {roomError}\r\n                    </div>}\r\n                    <input placeholder=\"Password\" type=\"password\" value={password} onChange={handlePasswordChange} />\r\n                    {passwordError != \"\" && <div className=\"error\">\r\n                        {passwordError}\r\n                    </div>}\r\n                    <button type=\"submit\">Create Room</button>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    )\r\n};\r\n\r\nexport default Home;","import React, { useState, createContext, useContext } from 'react';\r\n\r\nconst RoomContext = createContext(null);\r\nconst UpdateRoomContext = createContext(null);\r\n\r\nconst useRoom=()=>{\r\n    return useContext(RoomContext);\r\n}\r\n\r\nconst useSetRoom=()=>{\r\n    return useContext(UpdateRoomContext);\r\n}\r\n\r\nconst RoomContextProvider = ({ children }) => {\r\n    const [room, setRoom] = useState(null);\r\n    return (\r\n        <RoomContext.Provider value={room}>\r\n            <UpdateRoomContext.Provider value={setRoom}>\r\n                {children}\r\n            </UpdateRoomContext.Provider>\r\n        </RoomContext.Provider>\r\n    )\r\n}\r\n\r\nexport default RoomContextProvider;\r\nexport { RoomContext, useRoom, useSetRoom };","import React, { useState, createContext, useContext, useEffect } from 'react';\r\nimport { useSetRoom } from './RoomContext';\r\n\r\nconst SocketContext = createContext(null);\r\nconst UpdateSocketContext = createContext(null);\r\n\r\nconst useSocket = () => {\r\n    return useContext(SocketContext);\r\n}\r\n\r\nconst useSetSocket = () => {\r\n    return useContext(UpdateSocketContext);\r\n}\r\n\r\nconst SocketContextProvider = ({ children }) => {\r\n    const [socket, setSocket] = useState(window.io());\r\n    const setRoom=useSetRoom();\r\n    useEffect(() => {\r\n        socket.on(\"updateRoom\", room => {\r\n            setRoom(room);\r\n        });\r\n    }, [setRoom]);\r\n    return (\r\n        <SocketContext.Provider value={socket}>\r\n            <UpdateSocketContext.Provider value={setSocket}>\r\n                {socket && children}\r\n            </UpdateSocketContext.Provider>\r\n        </SocketContext.Provider>\r\n    )\r\n}\r\n\r\nexport default SocketContextProvider;\r\nexport { SocketContext, useSocket, useSetSocket };","import React, { useCallback, useEffect, useState } from 'react';\r\nimport { useHistory, useLocation, useParams } from 'react-router-dom';\r\nimport { useRoom, useSetRoom } from '../contexts/RoomContext';\r\nimport { useSocket } from '../contexts/SocketContext';\r\nimport useApi from '../hooks/useApi';\r\n\r\nlet socket;\r\nconst Room = props => {\r\n    const { link } = useParams();\r\n    const room = useRoom();\r\n    const setRoom = useSetRoom();\r\n    const history = useHistory();\r\n    const location = useLocation();\r\n    const socket = useSocket();\r\n    const api = useApi();\r\n    const [username, setUsername] = useState(location.state);\r\n    const [searchQuery, setSearchQuery] = useState(\"\");\r\n    const handleSearchQueryChange = (e) => {\r\n        setSearchQuery(e.target.value);\r\n    };\r\n    const [pvpokeRankings, setPvpokeRankings] = useState(null);\r\n    const pickPokemon = useCallback((e) => {\r\n        const chooser = room.players.find(player => player.pick_order == room.choosing);\r\n        if (chooser.username.toLowerCase() != username.toLowerCase()) {\r\n            return;\r\n        }\r\n        let selected = e.target.dataset.id;\r\n        let name = e.target.dataset.name;\r\n        if (window.confirm(`Do you want to select ${name}?`)) {\r\n            if (room.choosed_list.indexOf(selected) != -1) {\r\n                alert(\"This pokemon was already selected.\");\r\n            } else {\r\n                let newPick = {\r\n                    room_link: link,\r\n                    chooser,\r\n                    pick: name,\r\n                    pick_id: selected\r\n                }\r\n                setSearchQuery(\"\");\r\n                socket.emit(\"pick\", newPick);\r\n            }\r\n        }\r\n    }, [room, socket]);\r\n    const startDraft=useCallback(()=>{\r\n        if(window.confirm(\"Are you sure you want to start the draft? No other person will be able to join after the draft is started.\")){\r\n            socket.emit(\"startDraft\", link);\r\n        }\r\n    },[socket])\r\n    useEffect(() => {\r\n        if (room == null) {\r\n            history.push(`/joinroom/${link}`);\r\n        }\r\n    }, [room]);\r\n    useEffect(() => {\r\n        const getPvpokeRankingsAsync = async () => {\r\n            let res = await api(`rankings/1500`, \"GET\");\r\n            setPvpokeRankings(res);\r\n        };\r\n        getPvpokeRankingsAsync();\r\n    }, []);\r\n    return (\r\n        room && <div className=\"main\">\r\n            <div className=\"container titled room-container\" data-title={room.name}>\r\n                <div className=\"container-element playerlist\">\r\n                    <ul>\r\n                        {\r\n                            room.players.map((player) => {\r\n                                return (\r\n                                    <li className={player.online ? \"online\" : \"\"} key={player.username}>\r\n                                        <span>{player.username}</span>\r\n                                        <hr />\r\n                                    </li>\r\n                                )\r\n                            })\r\n                        }\r\n                    </ul>\r\n                </div>\r\n                <div className=\"container-element teams\">\r\n                    {\r\n                        room?.started ?\r\n                        room.players.map((player) => {\r\n                            return (\r\n                                <div className=\"player-team titled\" data-title={player.username}>\r\n                                    {\r\n                                        player.team.map(pokemon => {\r\n                                            return (\r\n                                                <div className=\"pick\" style={{ backgroundImage: `url(https://rankingsbot.com/imgs2/${pokemon.pick_id.replace(\"_\", \"-\").replace(\"alolan\", \"alola\")}.png)` }}>\r\n                                                </div>\r\n                                            )\r\n                                        }\r\n                                        )\r\n                                    }\r\n                                </div>\r\n                            )\r\n                        }):\r\n                        <h2>Everyone team will be showed here as soon as this draft will start!</h2>\r\n                    }\r\n                </div>\r\n                <div className=\"container-element commands\">\r\n                    {\r\n                        room?.started ?\r\n                        <>\r\n                            <div>\r\n                                Chooser: {room && room.players.find(player => player.pick_order == room.choosing).username}\r\n                            </div>\r\n                            <input className=\"searchBox\" placeholder=\"Search...\" type=\"text\" value={searchQuery} onChange={handleSearchQueryChange} />\r\n                            <div className=\"picks\">\r\n                                {\r\n                                    pvpokeRankings ?\r\n                                        pvpokeRankings.map(pick => {\r\n                                            return (\r\n                                                <div\r\n                                                    className={`pick ${room.choosed_list.indexOf(pick.speciesId) == -1 && pick.speciesId.toLowerCase().indexOf(searchQuery.toLowerCase()) != -1 ? \"\" : \"hidden\"} ${room.players.find(player => player.pick_order == room.choosing).username.toLowerCase() != username.toLowerCase() ? \"disabled\" : \"\"}`}\r\n                                                    style={{ backgroundImage: `url(https://rankingsbot.com/imgs2/${pick.speciesId.replace(\"_\", \"-\").replace(\"alolan\", \"alola\")}.png)` }}\r\n                                                    data-id={pick.speciesId}\r\n                                                    data-name={pick.speciesName}\r\n                                                    onClick={pickPokemon}\r\n                                                >\r\n                                                </div>\r\n                                            );\r\n                                        })\r\n                                        :\r\n                                        <div>\r\n                                            Loading...\r\n                            </div>\r\n                                }\r\n                            </div>\r\n                        </> :\r\n                        <div>\r\n                            <button class=\"lighter\" onClick={startDraft}>Start Draft</button>\r\n                        </div>\r\n                    }\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n};\r\n\r\nexport default Room;","import React, { useEffect, useRef, useState } from 'react';\r\nimport { useLocation, useParams, useHistory } from 'react-router-dom';\r\nimport { useRoom, useSetRoom } from '../contexts/RoomContext';\r\nimport { useSocket } from '../contexts/SocketContext'\r\nimport useApi from '../hooks/useApi'\r\n\r\nconst JoinRoom = props => {\r\n    const { link } = useParams();\r\n    const icon = useRef();\r\n    const location = useLocation();\r\n    const [room, setRoom] = useState(null);\r\n    const api = useApi();\r\n    const socket = useSocket();\r\n    const [username, setUsername] = useState(\"\");\r\n    const handleUsernameChange = (e) => {\r\n        setUsername(e.target.value);\r\n    };\r\n    const [password, setPassword] = useState(\"\");\r\n    const handlePasswordChange = (e) => {\r\n        setPassword(e.target.value);\r\n    };\r\n    const [roomPassword, setRoomPassword] = useState(\"\");\r\n    const handleRoomPasswordChange = (e) => {\r\n        setRoomPassword(e.target.value);\r\n    };\r\n    const [usernameError, setUsernameError] = useState(\"\");\r\n    const [passwordError, setPasswordError] = useState(\"\");\r\n    const [roomPasswordError, setRoomPasswordError] = useState(\"\");\r\n    const history = useHistory();\r\n    const globalRoom = useRoom();\r\n    const sha256 = async (message) => {\r\n        const encoder = new TextEncoder();\r\n        const data = encoder.encode(message);\r\n        const hash = await crypto.subtle.digest('SHA-256', data);\r\n        let binary = '';\r\n        const bytes = new Uint8Array(hash);\r\n        const len = bytes.byteLength;\r\n        for (let i = 0; i < len; i++) {\r\n            binary += String.fromCharCode(bytes[i]);\r\n        }\r\n        return btoa(binary);\r\n    }\r\n    const copyLink = async () => {\r\n        await navigator.clipboard.writeText(`https://pokemongo-drafter.herokuapp.com/joinroom/${link}`);\r\n        icon.current.classList.add(\"copied\");\r\n    }\r\n    const joinRoom = async (e) => {\r\n        e.preventDefault();\r\n        setPasswordError(\"\");\r\n        setUsernameError(\"\");\r\n        setRoomPasswordError(\"\");\r\n        if (await sha256(roomPassword) != room.password) {\r\n            setRoomPasswordError(\"Wrong room Password\");\r\n            return;\r\n        }\r\n        if (!/^\\w+$/.test(username)) {\r\n            setUsernameError(\"Username can't contain spaces or special characters and can't be blank\");\r\n            return;\r\n        }\r\n        if (password == \"\") {\r\n            setPasswordError(\"Password can't be blank\");\r\n            return;\r\n        }\r\n        socket.emit(\"joinRoom\", { username, password, room: link })\r\n    };\r\n    useEffect(() => {\r\n        const getRoomAsync = async () => {\r\n            let room = await api(`rooms/${link}`, \"GET\");\r\n            setRoom(room);\r\n        };\r\n        if (location.state) {\r\n            setRoom(location.state);\r\n        } else {\r\n            getRoomAsync();\r\n        }\r\n        socket.on(\"error\", message => {\r\n            if(message==\"Wrong password\"){\r\n                setPasswordError(\"Wrong password\")\r\n            }else{\r\n                setRoomPasswordError(message);\r\n            }\r\n        });\r\n    }, []);\r\n    useEffect(() => {\r\n        if (globalRoom != null) {\r\n            history.push(`/room/${globalRoom.link}`, username);\r\n        }\r\n    }, [globalRoom])\r\n    return (\r\n        room && <div className=\"main\">\r\n            <div className=\"container\">\r\n                <h3>\r\n                    {!(room.ok === false) ? `Joining room ${room.name}` : `No room with name ${link}`}\r\n                </h3>\r\n                {!(room.ok === false) && (\r\n                    <>\r\n                        <p className=\"explanation\">\r\n                            Chose your username and password, you can use them to come back later.<br />Share the following link with your friends together with the password to let them join the draft.\r\n                            <code class=\"share-link\" onClick={copyLink}>\r\n                                <span className=\"link\">\r\n                                    https://pokemongo-drafter.herokuapp.com/joinroom/{link}\r\n                                </span>\r\n                                <i ref={icon} class=\"material-icons right\">content_copy</i>\r\n                            </code>\r\n                        </p>\r\n                        <form onSubmit={joinRoom}>\r\n                            <input placeholder=\"Username\" type=\"text\" value={username} onChange={handleUsernameChange} />\r\n                            {usernameError != \"\" && <div className=\"error\">\r\n                                {usernameError}\r\n                            </div>}\r\n                            <input placeholder=\"Password\" type=\"password\" value={password} onChange={handlePasswordChange} />\r\n                            {passwordError != \"\" && <div className=\"error\">\r\n                                {passwordError}\r\n                            </div>}\r\n                            <input placeholder=\"Room Password\" type=\"password\" value={roomPassword} onChange={handleRoomPasswordChange} />\r\n                            {roomPasswordError != \"\" && <div className=\"error\">\r\n                                {roomPasswordError}\r\n                            </div>}\r\n                            <button type=\"submit\">Join</button>\r\n                        </form>\r\n                    </>\r\n                )\r\n                }\r\n            </div>\r\n        </div>\r\n    )\r\n};\r\n\r\nexport default JoinRoom;","import './App.css';\nimport { Home, Room, JoinRoom } from './views'\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route\n} from \"react-router-dom\";\n\nfunction App() {\n  return (\n    <Router>\n      <Switch>\n        <Route path=\"/\" exact component={Home}>\n        </Route>\n        <Route path=\"/room/:link\" exact component={Room}>\n        </Route>\n        <Route path=\"/joinroom/:link\" exact component={JoinRoom}>\n        </Route>\n        <Route path=\"/test\" exact>\n          <div>Test</div>\n        </Route>\n      </Switch>\n    </Router>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport SocketContextProvider from './contexts/SocketContext'\nimport RoomContextProvider from './contexts/RoomContext'\n\nReactDOM.render(\n  <React.StrictMode>\n    <RoomContextProvider>\n      <SocketContextProvider>\n        <App />\n      </SocketContextProvider>\n    </RoomContextProvider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}